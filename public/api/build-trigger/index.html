<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title> - Material Docs</title>
    <meta name="generator" content="Hugo 0.44" />

    
    <meta name="description" content="A material design theme for documentations.">
    
    <link rel="canonical" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/api/build-trigger/">
    
    <meta name="author" content="Digitalcraftsman">
    

    <meta property="og:url" content="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/api/build-trigger/">
    <meta property="og:title" content="Material Docs">
    <meta property="og:image" content="/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Material Docs">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('/fonts/icon.eot?52m981');
        src: url('/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('/fonts/icon.woff?52m981')
               format('woff'),
             url('/fonts/icon.ttf?52m981')
               format('truetype'),
             url('/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/stylesheets/application.css">
    <link rel="stylesheet" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/stylesheets/temporary.css">
    <link rel="stylesheet" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/stylesheets/palettes.css">
    <link rel="stylesheet" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/stylesheets/images.css">

    <link rel="stylesheet" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/javascripts/modernizr.js"></script>

    

  
    

    

    
    

    
    

    
    

    
    

    
    

    
    

    
    
    
    
    

    
    


  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/digitalcraftsman" title="@digitalcraftsman on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/digitalcraftsman/hugo-material-docs" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Material Docs <span class="version">1.0.0</span></strong>
        
          <br>
          digitalcraftsman/hugo-material-docs
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/digitalcraftsman/hugo-material-docs/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/digitalcraftsman/hugo-material-docs/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Getting Started" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/getting-started/">
	
	Getting Started
</a>



  
</li>



<li>
  
    



<a  title="API" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/api/">
	
	API
</a>



  
</li>



<li>
  
    



<a  title="Adding content" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/adding-content/">
	
	Adding content
</a>



  
</li>



<li>
  
    



<a  title="Roadmap" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/roadmap/">
	
	Roadmap
</a>



  
</li>



<li>
  
    



<a  title="License" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/license/">
	
	License
</a>



  
</li>



<li>
  
    



<a  title="Infrastructure" href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/infrastructure/">
	
	Infrastructure
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/digitalcraftsman" target="_blank" title="@digitalcraftsman on GitHub">
              @digitalcraftsman on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:hello@email.com" title="Email of hello@email.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1> </h1>

			

<p><em>Note: the <code>www</code> endpoint is now deprecated. Please use the <code>https://app.bitrise.io/app/APP-SLUG/build/start.json</code> endpoint instead.</em></p>

<p>With the Build Trigger API you can start a new build of your app with a simple API call.</p>

<p>You can define parameters for the build like what <code>branch</code>, <code>tag</code> or <em>git commit</em> to use
and what <em>build message</em> to present on the Build&rsquo;s details page.</p>

<p>!!! note &ldquo;Interactive cURL call configurator&rdquo;
    You can find an interactive cURL call configurator by clicking on the <code>Start/Schedule a build</code>
    button on your app&rsquo;s <a href="https://www.bitrise.io">bitrise.io</a> page
    and switching to <code>Advanced</code> mode in the popup.
    At the bottom of the popup you can find a <code>curl</code> call,
    based on the parameters you specify in the popup.</p>

<h2 id="how-to-start-a-build-by-calling-the-trigger-api">How to start a build by calling the Trigger API?</h2>

<p>You have to call your build trigger with a <code>POST</code> request with a JSON body.</p>

<p>!!! note &ldquo;Build Trigger Token and App Slug&rdquo;
    When you use the Bitrise Trigger API you have to specify the App&rsquo;s <code>Build Trigger Token</code> and <code>App Slug</code>.
    You can view both and regenerate your App&rsquo;s Build Trigger Token anytime you want to,
    on the <code>Code</code> tab of the app.</p>

<p><em>Note: the old <code>api_token</code> parameter is DEPRECATED, please use the <code>build_trigger_token</code> parameter instead</em></p>

<h2 id="json-body">JSON body</h2>

<p>The JSON body has to contain at least:</p>

<ul>
<li>a <code>hook_info</code> object with:

<ul>
<li>a <code>type</code> key and <code>bitrise</code> as its value</li>
<li>a <code>build_trigger_token</code> key and your <em>Build Trigger Token</em> as its value</li>
</ul></li>
<li>a <code>build_params</code> object, with at least a <code>tag</code>, <code>branch</code> or <code>workflow_id</code> parameter specified</li>
</ul>

<p>A minimal sample JSON body, which specifies <em>master</em> as the <code>branch</code> parameter:</p>

<pre><code>{
  &quot;hook_info&quot;: {
    &quot;type&quot;: &quot;bitrise&quot;,
    &quot;build_trigger_token&quot;: &quot;...&quot;
  },
  &quot;build_params&quot;: {
    &quot;branch&quot;: &quot;master&quot;
  }
}
</code></pre>

<p><strong>To pass this JSON payload</strong> you can either pass it as the <strong>body</strong> of the request <strong>as string</strong> (the JSON object serialized to string),
or if you want to pass it as an object (e.g. if you want to call it from JavaScript) then you have to include a root <code>payload</code>
element, or set the JSON object as the value of the <code>payload</code> POST parameter.</p>

<p>jQuery example using the <code>payload</code> parameter:</p>

<pre><code>$.post(&quot;https://app.bitrise.io/app/APP-SLUG/build/start.json&quot;, {
    &quot;payload&quot;:{
        &quot;hook_info&quot;:{
            &quot;type&quot;:&quot;bitrise&quot;,
            &quot;build_trigger_token&quot;:&quot;APP-API-TOKEN&quot;
        },
        &quot;build_params&quot;:{
            &quot;branch&quot;:&quot;master&quot;
        }
    }
})
</code></pre>

<h2 id="build-params">Build Params</h2>

<p>The following parameters are supported in the <code>build_params</code> object:</p>

<h3 id="git-related">Git related:</h3>

<ul>
<li><code>branch</code> (string): The (Source) Branch to build. In case of a standard git commit this is the branch of the commit.
In case of a Pull Request build this is the source branch, the one the PR was started from.</li>
<li><code>tag</code> (string): The git Tag to build.</li>
<li><code>commit_hash</code> (string): The git commit hash to build.</li>
<li><code>commit_message</code> (string): The git commit message (or build&rsquo;s message).</li>
</ul>

<h3 id="bitrise-io-specific">Bitrise.io specific:</h3>

<ul>
<li><code>workflow_id</code>: (string): Force the use of the specified workflow ID. If not defined then the workflow will be selected
based on the project&rsquo;s <a href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/webhooks/trigger-map/">Trigger Map config</a>.</li>
<li><code>environments</code> (array of objects): See the <a href="#specify-environment-variables">Specify Environment Variables</a> section for more info
about the <code>environments</code> objects.</li>
<li><code>skip_git_status_report</code> (bool): Skip sending build status for the connected git provider</li>
</ul>

<h3 id="pull-request-specific">Pull Request specific:</h3>

<ul>
<li><code>branch_dest</code> (string): Used only in case of Pull Request builds: the destination/target branch of the Pull Request,
the one the PR will be merged <em>into</em>. Example: <code>master</code>.</li>
<li><code>pull_request_id</code> (int): Pull Request ID on the source code hosting system (e.g. the PR number on GitHub)</li>
<li><code>pull_request_repository_url</code> (string): repository url from where the Pull Request is sent. E.g. if
it&rsquo;s created from a fork this should be the fork&rsquo;s URL. Example: <code>https://github.com/xyz/bitrise.git</code>.</li>
<li><code>pull_request_merge_branch</code> (string): the pre-merge branch, <strong>if the source code hosting system supports &amp; provides</strong>
the pre-merged state of the PR on a special &ldquo;merge branch&rdquo; (ref). Probably only GitHub supports this.
Example: <code>pull/12/merge</code>.</li>
<li><code>pull_request_head_branch</code> (string): the Pull Request&rsquo;s &ldquo;head branch&rdquo; (<code>refs/</code>) <strong>if the source code hosting system supports &amp; provides</strong> this.
This special git <code>ref</code> should point to the <strong>source</strong> of the Pull Request. Supported by GitHub and GitLab.
Example: <code>pull/12/head</code> (github) / <code>merge-requests/12/head</code> (gitlab).</li>
</ul>

<p>!!! note &ldquo;Git Clone - parameter priority&rdquo;
    If you provide a <code>tag</code>, the <code>branch</code> parameter will be ignored by the <code>Git Clone</code> step.
    If you provide a <code>commit_hash</code> parameter then both the <code>tag</code> and the <code>branch</code> parameters will be ignored.
    These will still be logged, will be available for steps and will be visible on the Build&rsquo;s details page,
    but the <code>Git Clone</code> step will use the the most specific parameter for checkout.</p>

<h3 id="specify-environment-variables">Specify Environment Variables</h3>

<p>You can define additional <em>environment variables</em> for your build.</p>

<p><em>These variables will be handled with priority between <code>Secrets</code> and <code>App Env Vars</code>,
which means that you can not overwrite environment variables defined in
your build configuration (e.g. App Env Vars), only Secrets.
For more information see:
<a href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/bitrise-cli/most-important-concepts/#availability-order-of-environment-variables">Availability order of environment variables</a></em></p>

<p>It&rsquo;s important that this parameter have to be an <strong>array of objects</strong>,
and that every item of the array have to include
at least a <code>mapped_to</code> (the key of the Environment Variable, without a dollar sign (<code>$</code>))
and a <code>value</code> property (the value of the variable). By default environment variable names inside values will be replaced in triggered build by actual value from target environment. This behavior can be disabled by setting <code>is_expand</code> flag to <code>false</code>.</p>

<p>Example:</p>

<pre><code>&quot;environments&quot;:[
  {&quot;mapped_to&quot;:&quot;API_TEST_ENV&quot;,&quot;value&quot;:&quot;This is the test value&quot;,&quot;is_expand&quot;:true},
  {&quot;mapped_to&quot;:&quot;HELP_ENV&quot;,&quot;value&quot;:&quot;$HOME variable contains user's home directory path&quot;,&quot;is_expand&quot;:false},
]
</code></pre>

<h3 id="workflow-to-be-used-for-the-build">Workflow to be used for the build</h3>

<p>By default the Workflow for your Build will be selected based on the
<code>build_params</code> and your app&rsquo;s <a href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/webhooks/trigger-map/">Trigger Map</a>.
This is the same as how <a href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/webhooks/">Webhooks</a> select the workflow for the build
automatically (based on the <em>Trigger Map</em>), and how you can
define separate Workflows for separate branches, tags or pull requests
without the need to specify the workflow manually for every build.</p>

<p>With the Trigger API you can however <strong>overwrite</strong> this selection
and specify exactly which Workflow you want to use.</p>

<p>All you have to do is add a <code>workflow_id</code> parameter to your <code>build_params</code>
and specify the Workflow you want to use for that specific build.</p>

<p>An example <code>build_params</code> with <code>branch</code> and <code>workflow_id</code>:</p>

<pre><code>&quot;build_params&quot;:{&quot;branch&quot;:&quot;master&quot;,&quot;workflow_id&quot;:&quot;deploy&quot;}'
</code></pre>

<h2 id="curl-example-generator"><code>curl</code> example generator</h2>

<p>You can find an interactive cURL call configurator by clicking on the <code>Start/Schedule a build</code>
button on your app&rsquo;s <a href="https://www.bitrise.io">bitrise.io</a> page
and switching to <code>Advanced</code> mode in the popup.
At the bottom of the popup you can find a <code>curl</code> call, based on the parameters you specify in the popup.</p>

<p>A base curl call would look like this (with <code>master</code> specified as the <code>branch</code> build parameter):</p>

<pre><code>curl -H 'Content-Type: application/json' https://app.bitrise.io/app/APP-SLUG/build/start.json --data '{&quot;hook_info&quot;:{&quot;type&quot;:&quot;bitrise&quot;,&quot;build_trigger_token&quot;:&quot;APP-API-TOKEN&quot;},&quot;build_params&quot;:{&quot;branch&quot;:&quot;master&quot;}}'
</code></pre>

<p><em>Note: please don&rsquo;t forget to add <code>Content-Type</code> header with <code>application/json</code> value</em></p>

<p>A more advanced example: let&rsquo;s say you want to build the <strong>master</strong> <code>branch</code>
using the <code>deployment</code> workflow,
specify a build message (<code>commit_message</code>)
and set a test environment variable (<code>API_TEST_ENV</code>),
the call will look like this:</p>

<pre><code>curl  -H 'Content-Type: application/json' https://app.bitrise.io/app/APP-SLUG/build/start.json --data '{&quot;hook_info&quot;:{&quot;type&quot;:&quot;bitrise&quot;,&quot;build_trigger_token&quot;:&quot;APP-API-TOKEN&quot;},&quot;build_params&quot;:{&quot;branch&quot;:&quot;master&quot;,&quot;commit_message&quot;:&quot;Environment in API params test&quot;,&quot;workflow_id&quot;:&quot;deployment&quot;,&quot;environments&quot;:[{&quot;mapped_to&quot;:&quot;API_TEST_ENV&quot;,&quot;value&quot;:&quot;This is the test value&quot;,&quot;is_expand&quot;:true}]}}'
</code></pre>


			<aside class="copyright" role="note">
				
				&copy; 2018 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/adding-a-new-app/" title="">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/api/outgoing-webhooks/" title="">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'http:\/\/demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com\/';
      var repo_id  = 'digitalcraftsman\/hugo-material-docs';
    
    </script>

    <script src="http://demo.devcenter.bitrise.io.s3-website-us-east-1.amazonaws.com/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

